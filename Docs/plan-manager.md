# üìã PlanManager

> **PlanManager —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–º–∏ –∏ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–ª–∞–Ω–∞–º–∏ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –∏ NPC.**

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–º–∏ –ø–ª–∞–Ω–∞–º–∏
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **—á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è**:

| –°–æ–±—ã—Ç–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|--------|---------|
| `plan.created` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞ |
| `plan.updated` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ |
| `plan.deleted` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ |
| `plan.executed` | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–∏ –ø–ª–∞–Ω–∞ |
| `plan.completed` | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ |
| `plan.failed` | –ù–µ—É–¥–∞—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ |

## üß† –°–æ—Å—Ç–æ—è–Ω–∏–µ PlanManager

- –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –≤—Å–µ—Ö –ø–ª–∞–Ω–∞—Ö –≤ –ø–∞–º—è—Ç–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–ª–∞–Ω–æ–≤
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üì° –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

1. –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç `player_events` –∏ `world_events`
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–µ–ª—è—Ö –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–ª–∞–Ω—ã
4. –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–ª–∞–Ω–æ–≤

## üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- **EntityManager**: –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å—É—â–Ω–æ—Å—Ç—è—Ö
- **WorldGenerator**: –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–∏—Ä–∞
- **GameService**: –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∏–≥—Ä–æ–∫–∞–º–∏
- **SemanticMemory**: –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ –≤ –∏–≥—Ä–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∑–∞–¥–∞—á
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
- –ì–∏–±–∫–æ—Å—Ç—å –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–ª–∞–Ω–∞–º–∏

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

- –°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –ø–∞–∫–µ—Ç–µ `services/planmanager`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `eventbus.EventBus` –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–∑ `eventbus.TopicPlayerEvents`, `eventbus.TopicWorldEvents`
- –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –≥—Ä—É–ø–ø—ã `plan-manager-group`, `plan-world-group`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `KAFKA_BROKERS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `localhost:9092`)
- –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –≥—Ä—É–ø–ø—ã —Å–æ–±—ã—Ç–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–Ω–∞–º–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- –í—Ä–µ–º—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤