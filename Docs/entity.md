–ö–æ–Ω–µ—á–Ω–æ! –ù–∏–∂–µ ‚Äî **—Ñ–∏–Ω–∞–ª—å–Ω—ã–π, –ø–æ–ª–Ω—ã–π –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ñ–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** `entity.md`, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–æ–¥–µ–ª—å —Å—É—â–Ω–æ—Å—Ç–∏ –≤ "–ñ–∏–≤–æ–º –ú—É–ª—å—Ç–∏–≤–µ—Ä—Å—É–º–µ" ‚Äî –æ—Ç —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏ –¥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π.

–í—ã –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –≤ –ø–∞–ø–∫–µ `docs/`.

---

# üß± –ú–æ–¥–µ–ª—å —Å—É—â–Ω–æ—Å—Ç–∏ (Entity)

> **Entity ‚Äî —ç—Ç–æ –Ω–µ —Å–µ—Ä–≤–∏—Å, –∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–Ω–æ—Å–∏—Ç–µ–ª—å, –æ—Å–Ω–æ–≤–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Å—ë–º –º—É–ª—å—Ç–∏–≤–µ—Ä—Å—É–º–µ.**  
> –û–Ω–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–ª—é–±–æ–π –æ–±—ä–µ–∫—Ç**: –∏–≥—Ä–æ–∫–∞, NPC, –¥–µ—Ä–µ–≤–æ, –º–µ—à–æ–∫, –º–æ–Ω–µ—Ç—É, –≥—Ä—É–ø–ø—É, –º–∏—Ä ‚Äî –≤—Å—ë, —á—Ç–æ –∏–º–µ–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—é.

–°—É—â–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ **–µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞—é—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã: GM, BanOfWorld, CityGovernor, –∫–ª–∏–µ–Ω—Ç –∏ –ò–ò.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `entity_id` | `string` (UUID) | **–ì–ª–æ–±–∞–ª—å–Ω—ã–π, –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä** –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å –æ–±—ä–µ–∫—Ç–∞. |
| `entity_type` | `string` | –¢–µ–∫—É—â–∏–π —Ç–∏–ø: `player`, `group`, `npc`, `tree`, `artifact`, `bag`, `coin` –∏ —Ç.–¥. –ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è. |
| `created_at` | `timestamp` | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è. |
| `updated_at` | `timestamp` | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. |

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `payload` | `map<string, any>` | **–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –¥–ª—è —Ç–∏–ø–∞:<br>- –∏–≥—Ä–æ–∫: `{ "name": "Kain", "inventory": ["bag-123"], "skills": ["void_call"] }`<br>- –≥—Ä—É–ø–ø–∞: `{ "members": ["player-1", "player-2"], "leader": "player-1" }`<br>- –º–µ—à–æ–∫: `{ "capacity": 10, "inventory": ["coin-777"] }`<br>‚Üí –ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é (—ç–≤–æ–ª—é—Ü–∏—è —Ñ–æ—Ä–º—ã). |

### –ò—Å—Ç–æ—Ä–∏—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `history` | `array<HistoryEntry>` | –°–ø–∏—Å–æ–∫ **—Å—Å—ã–ª–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è**, –ø–æ–≤–ª–∏—è–≤—à–∏–µ –Ω–∞ —Å—É—â–Ω–æ—Å—Ç—å. |

#### –≠–ª–µ–º–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ (`HistoryEntry`)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `event_id` | `string` | ID —Å–æ–±—ã—Ç–∏—è –≤ —à–∏–Ω–µ (Redpanda). |
| `timestamp` | `timestamp` | –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è. |

> ‚ö†Ô∏è **–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –≤ —à–∏–Ω–µ (Redpanda) –∏ –∞—Ä—Ö–∏–≤–µ (MinIO).**  
> –°—É—â–Ω–æ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏**, —á—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å.

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

–°—É—â–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ç–æ—á–µ—á–Ω—ã–µ, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –Ω–∞–¥ `payload`:

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **`Set(key, value)`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ (top-level –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –ø—É—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä `"stats.hp"`).
- **`Get(key)`** ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ.
- **`Has(key)`** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ.
- **`Remove(key)`** ‚Äî —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ.

### –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏
- **`AddToStringSlice(key, item)`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ slice (–±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤).
- **`RemoveFromStringSlice(key, item)`** ‚Äî —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É –∏–∑ slice.

### –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è **–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—É—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É**:
```go
entity.SetPath("stats.hp", 100)
entity.AddToStringSlice("inventory", "sword-1")
```
‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.

> üí° –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º –Ω–µ –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π.

---

## üîó –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ

### –ü—Ä–∏–º–µ—Ä: –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –≥—Ä—É–ø–ø–µ

1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ ‚Üí —Å–æ–±—ã—Ç–∏–µ –≤ —à–∏–Ω—É:
   ```json
   {
     "event_type": "group.join_requested",
     "mentions": ["player-777", "group-alpha"]
   }
   ```

2. **GM-–º–µ–Ω–µ–¥–∂–µ—Ä** –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ:
   - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ `entity_id` —É **Semantic Memory Builder**.
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Ascension Oracle.
   - –ü—É–±–ª–∏–∫—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `group.joined`.

3. **EntityManager** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ:
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ `player-777` –∏ `group-alpha`.
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç:  
     ```go
     group.AddToStringSlice("members", "player-777")
     group.AddHistoryEntry("evt-join-1", now)
     ```
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ MinIO.

‚Üí **Entity ‚Äî —ç—Ç–æ –¥–∞–Ω–Ω—ã–µ.**  
‚Üí **–°–µ—Ä–≤–∏—Å—ã ‚Äî —ç—Ç–æ –ª–æ–≥–∏–∫–∞, —Ä–∞–±–æ—Ç–∞—é—â–∞—è —Å –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è.**

---

## üåê –†–æ–ª—å Entity –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Entity |
|----------|----------------------|
| **–ö–ª–∏–µ–Ω—Ç** | –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç `payload`, —á–∏—Ç–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è. |
| **GM** | –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ. |
| **BanOfWorld** | –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `payload` –∏ `history` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑–æ–Ω–∞–Ω—Å —Å –Ø–¥—Ä–æ–º. |
| **EntityManager** | –•—Ä–∞–Ω–∏—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è. |
| **Semantic Memory** | –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ ‚Üí –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ `entity_id`. |
| **Ascension Oracle** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏–π. |

> ‚úÖ **Entity ‚Äî —ç—Ç–æ –æ–±—â–∏–π —è–∑—ã–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.**  
> ‚ùå **Entity ‚Äî —ç—Ç–æ –Ω–µ —Å–µ—Ä–≤–∏—Å –∏ –Ω–µ –ø—Ä–æ—Ü–µ—Å—Å.**

---

## ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –æ–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
2. **–ì–∏–±–∫–æ—Å—Ç—å**: `payload` –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ª—é–±–æ–π —Ç–∏–ø –∏ –æ–Ω—Ç–æ–ª–æ–≥–∏—é.
3. **–ò—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç—å**: –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Äî —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ –≤ —à–∏–Ω–µ.
4. **–°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å**: —Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é.
5. **–≠–≤–æ–ª—é—Ü–∏—è**: —Å—É—â–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º—É (–¥–µ—Ä–µ–≤–æ ‚Üí NPC ‚Üí –±–æ–≥), –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `entity_id` –∏ –∏—Å—Ç–æ—Ä–∏—é.
6. **–ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å**: –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –º–∏—Ä—É ‚Äî `location` –ø—Ä–æ—Å—Ç–æ –ø–æ–ª–µ –≤ `payload`.

---

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Go)

–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ [`pkg/entity/entity.go`](./pkg/entity/entity.go).  
–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π** (`stats.hp`),
- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** —á–µ—Ä–µ–∑ `reflect.DeepEqual`,
- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏** (–±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤),
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏** (JSON, MinIO, Kafka).

–ü—Ä–∏–º–µ—Ä:
```go
player := entity.NewEntity("player-777", "player", nil)
player.SetPath("stats.hp", 100)
player.AddToStringSlice("inventory", "bag-123")
player.AddHistoryEntry("evt-1", time.Now())
```

---

> **Entity ‚Äî —ç—Ç–æ –∞—Ç–æ–º –º—É–ª—å—Ç–∏–≤–µ—Ä—Å—É–º–∞.  
> –ò–∑ –Ω–µ–≥–æ —Å—Ç—Ä–æ–∏—Ç—Å—è –≤—Å—ë: –æ—Ç –º–æ–Ω–µ—Ç—ã –¥–æ –ü–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫–∞.**